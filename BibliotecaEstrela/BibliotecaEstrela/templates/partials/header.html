{% load static %}
<nav class="navbar navbar-expand-lg bg-body-primary" style="background-color: #1D3A8C;">
    <div class="container-fluid">
        <a href="/">
            <img src={% static "Logo_Biblioteca_Estrela-Photoroom_1-removebg-preview 2.svg" %}>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
        <!-- BLOCO PESQUISA (CENTRO) -->
                <form method="GET" id="searchForm" class="d-flex mx-auto nav-search">

                    <input type="text" name="busca_nome" id="searchInput" class="header-input" placeholder="Pesquisar" required>

                    <button type="submit" class="btn btn-primary btn-header ">Pesquisar</button>

                </form>

                <!-- Função de busca de livro por nome -->
                <script>
                    document.getElementById('searchForm').onsubmit = function(event) {
                        event.preventDefault();
                        var busca_nome = document.getElementById('searchInput').value;

                        // Previne busca com input vazio
                        if (busca_nome!= ''){
                            window.location.href = "{% url 'busca_nome' busca='__' %}".replace('__', busca_nome);
                        }
                    };
                </script>

        <!-- BLOCO LINKS (DIREITA) -->
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="/">Inicio</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'livros' %}">Catalogo</a>
            </li>

            {% if user.is_authenticated and request.path != '/user/cadastro/' and request.path != '/user/login/' %}
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'tela_perfil' %}">Perfil</a>
                </li>
                <li class="nav-item">
                    <form action="{% url 'logout' %}" method="post" style="display:inline;">
                        {% csrf_token %}
                        <button class="nav-link" type="submit">Logout</button>
                    </form>
                </li>
            {% else %}
                <li class="nav-item">
                    <a class="btn btn-link nav-link" href="{% url 'login' %}">Login</a>
                </li>
            {% endif %}

            </ul>
        </div>
    </div>
</nav>